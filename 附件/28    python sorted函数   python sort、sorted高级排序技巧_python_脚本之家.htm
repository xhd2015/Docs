<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="gb2312" />
<meta name="applicable-device" content="pc">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta http-equiv="Cache-Control" content="no-transform" />
<title>python sort、sorted高级排序技巧_python_脚本之家</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="keywords" content="python,sort,sorted,高级排序" />
<meta name="description" content="这篇文章主要介绍了python sort、sorted高级排序技巧,本文讲解了基础排序、升序和降序、排序的稳定性和复杂排序、cmp函数排序法等内容,需要的朋友可以参考下" />
<link rel="alternate" media="only screen and(max-width: 640px)" href="http://m.jb51.net/article/57678.htm" />
<meta http-equiv="mobile-agent" content="format=html5; url=http://m.jb51.net/article/57678.htm" />
<meta http-equiv="mobile-agent" content="format=xhtml; url=http://m.jb51.net/article/57678.htm" />
<script type="text/javascript">
var tougao="junjie";var lmname="python";var ourl="";
(function(){var reWriteUrl=function(url){if(url){var Splits=url.split("/"),siteName=window.location.pathname;if(typeof siteName!=="undefined"){return"http://m.jb51.net"+siteName}}};if(/Android|webOS|iPhone|iPad|Windows Phone|iPod|BlackBerry|SymbianOS|Nokia|Mobile/i.test(navigator.userAgent)){var url=window.location.href;var pathname=window.location.pathname;if(url.indexOf("?pc")<0){try{window.location.href=reWriteUrl(url)}catch(e){}}}})();
</script>
<link type="text/css" href="http://img.jb51.net/skin/2016/base.css" rel="stylesheet" />
<link type="text/css" href="http://img.jb51.net/skin/2016/common.css" rel="stylesheet" />
<script type="text/javascript" src="http://img.jb51.net/jslib/jquery/jquery.min.js"></script>
<script type=text/javascript src="http://img.jb51.net/js/base.js"></script>
</head>
<body>
<!--head Star -->
<div id="head">
  <div class="toolBar">
  <div class="main">
    <!--topNav Star -->
    <div class="topNav clearfix">
      <ul class="navList fl">
        <li>
          <div class="one"><a href="http://www.jb51.net" target="_blank">脚本之家</a></div>
        </li>
        <li>
          <div class="one"><a href="http://www.jb51.net/softs/" target="_blank">软件下载<i class="icon"></i></a></div>
          <div class="two">
<a href="/softs/android.html" target="_blank">android软件</a> <a href="/softs/mac.html" target="_blank">MAC软件</a> <a href="/qudong/" target="_blank">驱动下载</a> <a href="/fonts/" target="_blank">字体下载</a> <a href="/dll/" target="_blank">DLL下载</a> </div>
</li>
        <li>
          <div class="one"><a href="/codes/" target="_blank">源码下载<i class="icon"></i></a></div>
          <div class="two"> <a href="/codes/asp.html" target="_blank">asp源码</a> <a href="/codes/php.html" target="_blank">php源码</a> <a href="/codes/aspnet.html" target="_blank">asp.net源码</a> <a href="/codes/jsp.html" target="_blank">jsp源码</a> <a href="/codes/editor.html" target="_blank">网页编辑器</a> <a href="/codes/list123_1.html" target="_blank">数据库管理</a> <a href="/codes/list124_1.html" target="_blank">常用组件</a> <a href="/jiaoben/" target="_blank">脚本下载</a></div>
        </li>
        <li>
          <div class="one"><a href="http://tools.jb51.net" target="_blank">在线工具<i class="icon"></i></a></div>
          <div class="two"> <a href="/shouce/" target="_blank">在线手册</a> <a href="/tools/cssyasuo.shtml" target="_blank">CSS格式化</a> <a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JS格式化</a> <a href="/tools/html-js.htm" target="_blank">Html转化为Js</a> <a href="http://tools.jb51.net/regex/javascript" target="_blank">js正则表达式</a>
</div>
        </li>
        <li>
          <div class="one"><a href="/w3school/" target="_blank">网页教程基础</a></div>
        </li>
			<li>
          <div class="one"><a href="http://s.jb51.net" target="_blank">服务器常用软件</a></div>
        </li>
		<li>
          <div class="one"><a href="http://m.jb51.net" target="_blank">手机版</a></div>
          <div class="two"><img src="http://files.jb51.net/images/m.jb51.net.png" data-baiduimageplus-ignore /></div>     
        </li>
        <li class="watch">
          <div class="one"><a href="http://weibo.com/jb51net" target="_blank" rel="nofollow" ><i class="icon"></i>关注微信</a></div>
          <div class="two"><img src="http://files.jb51.net/images/weixin_200.gif" data-baiduimageplus-ignore /></div>
        </li>
      </ul>
      <div class="navUser mt5 fr" id="jb51_topbar" > </div>
    </div>
    <!--topNav End -->
  </div>
</div>

  <div class="main clearfix">
    <div class="mtb10 clearfix">
      <div class="logo"><a href="http://www.jb51.net/"><img src="http://www.jb51.net/images/logo.gif" title="脚本之家" alt="脚本之家" /></a></div>
      <div class="logom fl"><span id="logo_m" class="jbTestPos"></span></div>
      <div class="logor fr"><span id="logo_r" class="jbTestPos"></span></div>
    </div>
<!-- 导航-->
<DIV class="nav_top clearfix">
<UL>
<li><a href="http://www.jb51.net/web/">网页制作</a></li>
<li><a href="http://www.jb51.net/list/index_1.htm">网络编程</a></li>
<li><a href="http://www.jb51.net/list/index_96.htm">脚本专栏</a></li>
<li><a href="http://www.jb51.net/jiaoben/">脚本下载</a></li>
<li><a href="http://www.jb51.net/list/index_104.htm">数据库</a></li>
<li><a href="http://www.jb51.net/cms/">CMS教程</a></li>
<li><a href="http://www.jb51.net/books/">电子书籍</a></li>
<li><a href="http://www.jb51.net/pingmian/">平面设计</a></li>
<li><a href="http://www.jb51.net/media/">媒体动画</a></li>
<li><a href="http://www.jb51.net/os/">操作系统</a></li>
<li><a href="http://www.jb51.net/yunying/">网站运营</a></li>
<li><a href="http://www.jb51.net/hack/">网络安全</a></li>
<li class="last"><a href="http://www.jb51.net/shouce/">在线手册</a></li>

</UL>
</DIV>

<!--导航结束-->
<div class="subnav clearfix">
<ul><li><a href='/list/list_114_1.htm' title="vbs">vbs</a></li>
<li><a href='/list/list_106_1.htm' title="DOS/BAT">DOS/BAT</a></li>
<li><a href='/list/list_110_1.htm' title="hta">hta</a></li>
<li><a href='/list/list_111_1.htm' title="htc">htc</a></li>
<li><a href='/list/list_97_1.htm' title="python">python</a></li>
<li><a href='/list/list_125_1.htm' title="perl">perl</a></li>
<li><a href='/list/list_138_1.htm' title="游戏相关">游戏相关</a></li>
<li><a href='/list/list_161_1.htm' title="VBA">VBA</a></li>
<li><a href='/list/list_163_1.htm' title="远程脚本">远程脚本</a></li>
<li><a href='/list/list_178_1.htm' title="ColdFusion">ColdFusion</a></li>
<li><a href='/list/list_201_1.htm' title="ruby专题">ruby专题</a></li>
<li><a href='/list/list_213_1.htm' title="autoit">autoit</a></li>
<li><a href='/list/list_214_1.htm' title="seraphzone">seraphzone</a></li>
<li><a href='/list/list_234_1.htm' title="PowerShell">PowerShell</a></li>
<li><a href='/list/list_235_1.htm' title="linux shell">linux shell</a></li>
<li><a href='/list/list_245_1.htm' title="Lua">Lua</a></li>
<li><a href='/list/list_246_1.htm' title="Golang">Golang</a></li>
<li><a href='/list/list_249_1.htm' title="Erlang ">Erlang </a></li>
<li><a href='/list/list_130_1.htm' title="其它">其它</a></li>
</ul>
</div>
<div class="NavBar clearfix ptb10">
<div class="fl w690">
<div class="box mb15 mt10"><i class="icon"></i>您的位置：<a href='/'>首页</a> → <a href="/list/index_96.htm" title="脚本专栏">脚本专栏</a> → <a href="/list/list_97_1.htm" title="python">python</a> → 正文内容 python高级排序</div>
</div>
<div class="fr w300"><div class="search">
<form action="http://so.jb51.net/cse/search" target="_blank">
    <input type="hidden" name="s" value="10520733385329581432">
    <input type="hidden" name="ie" value="gbk">
    <input type="text" name="q" class="key_input" placeholder="请输入关键词">
    <input type="submit" value="搜索" class="c_btn">
</form></div></div>
  </div>
</div>
<!--head End -->
<div class="main mb10 clearfix">
<div class="clearfix"><span id="tonglan1" class="jbTestPos"></span></div>
</div>

<!--content Star -->
<div id="contents">
 <div class="main clearfix">
      <div class="w690 fl">
      <div class="article-content border">
      <div class="title">
            <h1 class="YaHei">python sort、sorted高级排序技巧</h1>
            <p>投稿：junjie  字体：[<a href="javascript:turnbig()">增加</a> <a href="javascript:turnsmall()">减小</a>] 类型：转载 时间：2014-11-21<a href="#comments"> 我要评论</a></p>
        </div>
        <div class="art_desc mt10"><div id="art_demo">这篇文章主要介绍了python sort、sorted高级排序技巧,本文讲解了基础排序、升序和降序、排序的稳定性和复杂排序、cmp函数排序法等内容,需要的朋友可以参考下</div></div>
        <div class="lbd clearfix"><span id="art_up" class="jbTestPos"></span></div>
        <div id="content">
<p>Python list内置sort()方法用来排序，也可以用python内置的全局sorted()方法来对可迭代的序列排序生成新的序列。</p>
<p><strong>1）排序基础</strong></p>
<p>简单的升序排序是非常容易的。只需要调用sorted()方法。它返回一个新的list，新的list的元素基于小于运算符(__lt__)来排序。<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="74096" class="copybut" id="copybut74096" onclick="doCopy('code74096')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code74096"><br />
&gt;&gt;&gt; sorted([5, 2, 3, 1, 4])<br />
[1, 2, 3, 4, 5]<br />
</div><br />
&nbsp;<br />
你也可以使用list.sort()方法来排序，此时list本身将被修改。通常此方法不如sorted()方便，但是如果你不需要保留原来的list，此方法将更有效。<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="65810" class="copybut" id="copybut65810" onclick="doCopy('code65810')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code65810"><br />
&gt;&gt;&gt; a = [5, 2, 3, 1, 4]<br />
&gt;&gt;&gt; a.sort()<br />
&gt;&gt;&gt; a<br />
[1, 2, 3, 4, 5]<br />
</div><br />
另一个不同就是list.sort()方法仅被定义在list中，相反地sorted()方法对所有的可迭代序列都有效。<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="43784" class="copybut" id="copybut43784" onclick="doCopy('code43784')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code43784">&gt;&gt;&gt; <br />
sorted({1: 'D', 2: 'B', 3: 'B', 4: 'E', 5: 'A'})<br />
[1, 2, 3, 4, 5]<br />
</div></p>
<p><strong>2）key参数/函数</strong></p>
<p>从python2.4开始，list.sort()和sorted()函数增加了key参数来指定一个函数，此函数将在每个元素比较前被调用。 例如通过key指定的函数来忽略字符串的大小写：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="83305" class="copybut" id="copybut83305" onclick="doCopy('code83305')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code83305"><br />
&gt;&gt;&gt; sorted("This is a test string from Andrew".split(), key=str.lower)<br />
['a', 'Andrew', 'from', 'is', 'string', 'test', 'This']<br />
</div><br />
key参数的值为一个函数，此函数只有一个参数且返回一个值用来进行比较。这个技术是快速的因为key指定的函数将准确地对每个元素调用。</p>
<p>更广泛的使用情况是用复杂对象的某些值来对复杂对象的序列排序，例如：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="64742" class="copybut" id="copybut64742" onclick="doCopy('code64742')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code64742"><br />
&gt;&gt;&gt; student_tuples = [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('john', 'A', 15),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('jane', 'B', 12),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ('dave', 'B', 10),<br />
]<br />
&gt;&gt;&gt; sorted(student_tuples, key=lambda student: student[2])&nbsp;&nbsp; # sort by age<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
</div></p>
<p>同样的技术对拥有命名属性的复杂对象也适用，例如：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="46988" class="copybut" id="copybut46988" onclick="doCopy('code46988')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code46988"><br />
&gt;&gt;&gt; class Student:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, name, grade, age):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.name = name<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.grade = grade<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.age = age<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __repr__(self):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return repr((self.name, self.grade, self.age))<br />
&gt;&gt;&gt; student_objects = [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Student('john', 'A', 15),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Student('jane', 'B', 12),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Student('dave', 'B', 10),<br />
]<br />
&gt;&gt;&gt; sorted(student_objects, key=lambda student: student.age)&nbsp;&nbsp; # sort by age<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
</div></p>
<p><strong>3）Operator 模块函数</strong></p>
<p>上面的key参数的使用非常广泛，因此python提供了一些方便的函数来使得访问方法更加容易和快速。operator模块有itemgetter，attrgetter，从2.6开始还增加了methodcaller方法。使用这些方法，上面的操作将变得更加简洁和快速：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="73691" class="copybut" id="copybut73691" onclick="doCopy('code73691')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code73691"><br />
&gt;&gt;&gt; from operator import itemgetter, attrgetter<br />
&gt;&gt;&gt; sorted(student_tuples, key=itemgetter(2))<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
&gt;&gt;&gt; sorted(student_objects, key=attrgetter('age'))<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
</div><br />
operator模块还允许多级的排序，例如，先以grade，然后再以age来排序：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="93581" class="copybut" id="copybut93581" onclick="doCopy('code93581')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code93581"><br />
&gt;&gt;&gt; sorted(student_tuples, key=itemgetter(1,2))<br />
[('john', 'A', 15), ('dave', 'B', 10), ('jane', 'B', 12)]<br />
&gt;&gt;&gt; sorted(student_objects, key=attrgetter('grade', 'age'))<br />
[('john', 'A', 15), ('dave', 'B', 10), ('jane', 'B', 12)]<br />
</div></p>
<p><strong>4）升序和降序</strong></p>
<p>list.sort()和sorted()都接受一个参数reverse（True or False）来表示升序或降序排序。例如对上面的student降序排序如下：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="60469" class="copybut" id="copybut60469" onclick="doCopy('code60469')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code60469"><br />
&gt;&gt;&gt; sorted(student_tuples, key=itemgetter(2), reverse=True)<br />
[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]<br />
&gt;&gt;&gt; sorted(student_objects, key=attrgetter('age'), reverse=True)<br />
[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]<br />
</div></p>
<p><strong>5）排序的稳定性和复杂排序</strong></p>
<p>从python2.2开始，排序被保证为稳定的。意思是说多个元素如果有相同的key，则排序前后他们的先后顺序不变。<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="59806" class="copybut" id="copybut59806" onclick="doCopy('code59806')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code59806"><br />
&gt;&gt;&gt; data = [('red', 1), ('blue', 1), ('red', 2), ('blue', 2)]<br />
&gt;&gt;&gt; sorted(data, key=itemgetter(0))<br />
[('blue', 1), ('blue', 2), ('red', 1), ('red', 2)]<br />
</div><br />
注意在排序后'blue'的顺序被保持了，即'blue', 1在'blue', 2的前面。<br />
&nbsp;<br />
更复杂地你可以构建多个步骤来进行更复杂的排序，例如对student数据先以grade降序排列，然后再以age升序排列。<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="35239" class="copybut" id="copybut35239" onclick="doCopy('code35239')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code35239"><br />
&gt;&gt;&gt; s = sorted(student_objects, key=attrgetter('age'))&nbsp;&nbsp;&nbsp;&nbsp; # sort on secondary key<br />
&gt;&gt;&gt; sorted(s, key=attrgetter('grade'), reverse=True)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # now sort on primary key, descending<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
</div></p>
<p><strong>6）最老土的排序方法-DSU</strong></p>
<p>我们称其为DSU（Decorate-Sort-Undecorate）,原因为排序的过程需要下列三步：<br />
第一：对原始的list进行装饰，使得新list的值可以用来控制排序；<br />
第二：对装饰后的list排序；<br />
第三：将装饰删除，将排序后的装饰list重新构建为原来类型的list；<br />
&nbsp;</p>
<p>例如，使用DSU方法来对student数据根据grade排序：<br />
&gt;&gt;&gt; decorated = [(student.grade, i, student) for i, student in enumerate(student_objects)]<br />
&gt;&gt;&gt; decorated.sort()<br />
&gt;&gt;&gt; [student for grade, i, student in decorated]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # undecorate<br />
[('john', 'A', 15), ('jane', 'B', 12), ('dave', 'B', 10)]<br />
上面的比较能够工作，原因是tuples是可以用来比较，tuples间的比较首先比较tuples的第一个元素，如果第一个相同再比较第二个元素，以此类推。<br />
&nbsp;</p>
<p>并不是所有的情况下都需要在以上的tuples中包含索引，但是包含索引可以有以下好处：<br />
第一：排序是稳定的，如果两个元素有相同的key，则他们的原始先后顺序保持不变；<br />
第二：原始的元素不必用来做比较，因为tuples的第一和第二元素用来比较已经是足够了。<br />
&nbsp;</p>
<p>此方法被RandalL.在perl中广泛推广后，他的另一个名字为也被称为Schwartzian transform。<br />
&nbsp;</p>
<p>对大的list或list的元素计算起来太过复杂的情况下，在python2.4前，DSU很可能是最快的排序方法。但是在2.4之后，上面解释的key函数提供了类似的功能。<br />
&nbsp;</p>
<p><strong>7）其他语言普遍使用的排序方法-cmp函数</strong></p>
<p>在python2.4前，sorted()和list.sort()函数没有提供key参数，但是提供了cmp参数来让用户指定比较函数。此方法在其他语言中也普遍存在。</p>
<p>在python3.0中，cmp参数被彻底的移除了，从而简化和统一语言，减少了高级比较和__cmp__方法的冲突。</p>
<p>在python2.x中cmp参数指定的函数用来进行元素间的比较。此函数需要2个参数，然后返回负数表示小于，0表示等于，正数表示大于。例如：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="8940" class="copybut" id="copybut8940" onclick="doCopy('code8940')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code8940"><br />
&gt;&gt;&gt; def numeric_compare(x, y):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return x - y<br />
&gt;&gt;&gt; sorted([5, 2, 4, 1, 3], cmp=numeric_compare)<br />
[1, 2, 3, 4, 5]<br />
</div><br />
或者你可以反序排序：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="61278" class="copybut" id="copybut61278" onclick="doCopy('code61278')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code61278"><br />
&gt;&gt;&gt; def reverse_numeric(x, y):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return y - x<br />
&gt;&gt;&gt; sorted([5, 2, 4, 1, 3], cmp=reverse_numeric)<br />
[5, 4, 3, 2, 1]<br />
</div><br />
当我们将现有的2.x的代码移植到3.x时，需要将cmp函数转化为key函数，以下的wrapper很有帮助：</p>
<p><div class="codetitle"><span><a style="CURSOR: pointer" data="4263" class="copybut" id="copybut4263" onclick="doCopy('code4263')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code4263"><br />
def cmp_to_key(mycmp):<br />
&nbsp;&nbsp;&nbsp; 'Convert a cmp= function into a key= function'<br />
&nbsp;&nbsp;&nbsp; class K(object):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __init__(self, obj, *args):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; self.obj = obj<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __lt__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) &lt; 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __gt__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) &gt; 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __eq__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) == 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __le__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) &lt;= 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __ge__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) &gt;= 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def __ne__(self, other):<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mycmp(self.obj, other.obj) != 0<br />
&nbsp;&nbsp;&nbsp; return K<br />
</div></p>
<p>当需要将cmp转化为key时，只需要：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="28425" class="copybut" id="copybut28425" onclick="doCopy('code28425')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code28425"><br />
&gt;&gt;&gt; sorted([5, 2, 4, 1, 3], key=cmp_to_key(reverse_numeric))<br />
[5, 4, 3, 2, 1]<br />
</div><br />
从python2.7，cmp_to_key()函数被增加到了functools模块中。</p>
<p><strong>8)其他注意事项</strong></p>
<p>* 对需要进行区域相关的排序时，可以使用locale.strxfrm()作为key函数，或者使用local.strcoll()作为cmp函数。</p>
<p>* reverse参数任然保持了排序的稳定性，有趣的时，同样的效果可以使用reversed()函数两次来实现：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="55938" class="copybut" id="copybut55938" onclick="doCopy('code55938')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code55938"><br />
&gt;&gt;&gt; data = [('red', 1), ('blue', 1), ('red', 2), ('blue', 2)]<br />
&gt;&gt;&gt; assert sorted(data, reverse=True) == list(reversed(sorted(reversed(data))))<br />
</div></p>
<p>* 其实排序在内部是调用元素的__cmp__来进行的，所以我们可以为元素类型增加__cmp__方法使得元素可比较，例如：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="20285" class="copybut" id="copybut20285" onclick="doCopy('code20285')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code20285"><br />
&gt;&gt;&gt; Student.__lt__ = lambda self, other: self.age &lt; other.age<br />
&gt;&gt;&gt; sorted(student_objects)<br />
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]<br />
</div><br />
* key函数不仅可以访问需要排序元素的内部数据，还可以访问外部的资源，例如，如果学生的成绩是存储在dictionary中的，则可以使用此dictionary来对学生名字的list排序，如下：<br />
<div class="codetitle"><span><a style="CURSOR: pointer" data="53801" class="copybut" id="copybut53801" onclick="doCopy('code53801')"><U>复制代码</U></a></span> 代码如下:</div><div class="codebody" id="code53801"><br />
&gt;&gt;&gt; students = ['dave', 'john', 'jane']<br />
&gt;&gt;&gt; newgrades = {'john': 'F', 'jane':'A', 'dave': 'C'}<br />
&gt;&gt;&gt; sorted(students, key=newgrades.__getitem__)<br />
['jane', 'dave', 'john']<br />
</div></p>
<p>*当你需要在处理数据的同时进行排序的话，sort(),sorted()或bisect.insort()不是最好的方法。在这种情况下，可以使用heap，red-black tree或treap。</p>

</div><!--endmain-->
<div class="art_xg">
<h4>您可能感兴趣的文章:</h4><ul><li><a href="/article/16910.htm" title="python3.0 字典key排序" target="_blank">python3.0 字典key排序</a></li><li><a href="/article/55082.htm" title="python里对list中的整数求平均并排序" target="_blank">python里对list中的整数求平均并排序</a></li><li><a href="/article/51115.htm" title="Python中字典(dict)和列表(list)的排序方法实例" target="_blank">Python中字典(dict)和列表(list)的排序方法实例</a></li><li><a href="/article/54481.htm" title="python字符串排序方法" target="_blank">python字符串排序方法</a></li><li><a href="/article/21008.htm" title="python 快速排序代码" target="_blank">python 快速排序代码</a></li><li><a href="/article/43556.htm" title="python冒泡排序算法的实现代码" target="_blank">python冒泡排序算法的实现代码</a></li><li><a href="/article/30502.htm" title="python 算法 排序实现快速排序" target="_blank">python 算法 排序实现快速排序</a></li><li><a href="/article/55633.htm" title="python实现忽略大小写对字符串列表排序的方法" target="_blank">python实现忽略大小写对字符串列表排序的方法</a></li><li><a href="/article/30504.htm" title="python 实现插入排序算法" target="_blank">python 实现插入排序算法</a></li><li><a href="/article/43550.htm" title="python快速排序代码实例" target="_blank">python快速排序代码实例</a></li><li><a href="/article/48540.htm" title="Python Trie树实现字典排序" target="_blank">Python Trie树实现字典排序</a></li><li><a href="/article/34460.htm" title="python实现的各种排序算法代码" target="_blank">python实现的各种排序算法代码</a></li><li><a href="/article/30505.htm" title="python 实现归并排序算法" target="_blank">python 实现归并排序算法</a></li><li><a href="/article/86040.htm" title="浅析Python中的多条件排序实现" target="_blank">浅析Python中的多条件排序实现</a></li></ul>
</div>
<div class="lbd clearfix">
<span id="art_down" class="jbTestPos"></span>
</div>
<div id="shoucang"></div>
<div class="tags mt10">
<strong>Tags：</strong><a href="http://img.jb51.net/tag/python/1.htm" target="_blank" title="搜索关于python的文章">python</a> <a href="http://img.jb51.net/tag/sort/1.htm" target="_blank" title="搜索关于sort的文章">sort</a> <a href="http://img.jb51.net/tag/sorted/1.htm" target="_blank" title="搜索关于sorted的文章">sorted</a> <a href="http://img.jb51.net/tag/%B8%DF%BC%B6%C5%C5%D0%F2/1.htm" target="_blank" title="搜索关于高级排序的文章">高级排序</a> 
</div>
<DIV class="relatedarticle clearfix mt5">
<H2>相关文章</H2>
<ul><li><span>2016-05-05</span><a href="/article/84295.htm" title="python字符类型的一些方法小结" target="_blank">python字符类型的一些方法小结</a></li><li><span>2014-09-09</span><a href="/article/55811.htm" title="Python中logging模块的用法实例" target="_blank">Python中logging模块的用法实例</a></li><li><span>2014-10-10</span><a href="/article/55956.htm" title="python求pi的方法" target="_blank">python求pi的方法</a></li><li><span>2015-06-06</span><a href="/article/67113.htm" title="python基于xmlrpc实现二进制文件传输的方法" target="_blank">python基于xmlrpc实现二进制文件传输的方法</a></li><li><span>2014-11-11</span><a href="/article/57923.htm" title="Python中给List添加元素的4种方法分享" target="_blank">Python中给List添加元素的4种方法分享</a></li><li><span>2014-09-09</span><a href="/article/55144.htm" title="跟老齐学Python之有容乃大的list(1)" target="_blank">跟老齐学Python之有容乃大的list(1)</a></li><li><span>2014-05-05</span><a href="/article/50416.htm" title="一则python3的简单爬虫代码" target="_blank">一则python3的简单爬虫代码</a></li><li><span>2014-02-02</span><a href="/article/46632.htm" title="python基础教程之实现石头剪刀布游戏示例" target="_blank">python基础教程之实现石头剪刀布游戏示例</a></li><li><span>2014-01-01</span><a href="/article/46096.htm" title="python生成指定长度的随机数密码" target="_blank">python生成指定长度的随机数密码</a></li><li><span>2016-06-06</span><a href="/article/86500.htm" title="Python的Flask框架中集成CKeditor富文本编辑器的教程" target="_blank">Python的Flask框架中集成CKeditor富文本编辑器的教程</a></li></ul>
</DIV>
<div class="lbd clearfix mt5">
<span id="art_down2" class="jbTestPos"></span>
</div>
<a href="#comments"></a>
<div id="comments">
<H2>最新评论</H2>
<div class="pd5"><div id="SOHUCS" sid="art_57678"></div></div>
</div>
      </div><!--endborder-->
      </div><!--end fl-->
      
<div class="w300 fr">
<div class="r300 clearfix"><span id="side_up" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">大家感兴趣的内容</H4>
<UL class="newsList newList-in">
<li><EM class="no1">1</EM><a href="/article/926.htm" title="Python入门教程 超详细1小时学会Python" target="_blank">Python入门教程 超详细1小时学会</a></li><li><EM class="no2">2</EM><a href="/article/26543.htm" title="python 中文乱码问题深入分析" target="_blank">python 中文乱码问题深入分析</a></li><li><EM class="no3">3</EM><a href="/article/15707.htm" title="比较详细Python正则表达式操作指南(re使用)" target="_blank">比较详细Python正则表达式操作指</a></li><li><EM class="no4">4</EM><a href="/article/37287.htm" title="python strip()函数 介绍" target="_blank">python strip()函数 介绍</a></li><li><EM class="no5">5</EM><a href="/article/17560.htm" title="Python字符串的encode与decode研究心得乱码问题解决方法" target="_blank">Python字符串的encode与decode研</a></li><li><EM class="no6">6</EM><a href="/article/47978.htm" title="Python 列表(List)操作方法详解" target="_blank">Python 列表(List)操作方法详解</a></li><li><EM class="no7">7</EM><a href="/article/34998.htm" title="python 字符串split的用法分享" target="_blank">python 字符串split的用法分享</a></li><li><EM class="no8">8</EM><a href="/article/50689.htm" title="pycharm 使用心得（一）安装和首次使用" target="_blank">pycharm 使用心得（一）安装和首</a></li><li><EM class="no9">9</EM><a href="/article/47990.htm" title="Python 字典(Dictionary)操作详解" target="_blank">Python 字典(Dictionary)操作详解</a></li><li><EM class="no10">10</EM><a href="/article/47956.htm" title="Python 字符串操作方法大全" target="_blank">Python 字符串操作方法大全</a></li>
</UL>
</DIV>
</DIV>
<div class="r300 clearfix mt10"><span id="idctu" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">最近更新的内容</H4>
<UL class="newsListA">
<ul><li><a href="/article/54472.htm" title="python基础教程之常用运算符" target="_blank">python基础教程之常用运算符</a></li><li><a href="/article/64157.htm" title="python获取本机外网ip的方法" target="_blank">python获取本机外网ip的方法</a></li><li><a href="/article/50865.htm" title="python网络编程学习笔记(10)：webpy框架" target="_blank">python网络编程学习笔记(10)：webpy框架</a></li><li><a href="/article/63356.htm" title="Python的设计模式编程入门指南" target="_blank">Python的设计模式编程入门指南</a></li><li><a href="/article/65248.htm" title="用Python实现服务器中只重载被修改的进程的方法" target="_blank">用Python实现服务器中只重载被修改的进程</a></li><li><a href="/article/85745.htm" title="Python黑魔法Descriptor描述符的实例解析" target="_blank">Python黑魔法Descriptor描述符的实例解析</a></li><li><a href="/article/49397.htm" title="Python中的Numpy入门教程" target="_blank">Python中的Numpy入门教程</a></li><li><a href="/article/64855.htm" title="python使用PIL缩放网络图片并保存的方法" target="_blank">python使用PIL缩放网络图片并保存的方法</a></li><li><a href="/article/67048.htm" title="python实现图片变亮或者变暗的方法" target="_blank">python实现图片变亮或者变暗的方法</a></li><li><a href="/article/74837.htm" title="使用Python下载歌词并嵌入歌曲文件中的实现代码" target="_blank">使用Python下载歌词并嵌入歌曲文件中的实</a></li></ul>
</UL>
</DIV>
</DIV>   
<div class="r300 clearfix mt10"><span id="idctu1" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">常用在线小工具</H4>
<ul class="newsListA"><span id="bctools" class="jbTestPos"></span></ul>
</DIV>
</DIV>
<div class="r300 clearfix mt10" id="idctu2"><span id="idctu2" class="jbTestPos"></span></div>
<div class="mt10 rFixedBox">
<span id="r_2" class="jbTestPos"></span>
</div>
      
      
      </div><!--end fr-->
      </div>
</div><!--end content-->
<div id="footer">
<div class="main clearfix">
<p>
<a href="http://www.jb51.net/about.htm" target="_blank">关于我们</a> - 
<a href="http://www.jb51.net/support.htm" target="_blank">广告合作</a> - 
<a href="http://www.jb51.net/linkus.htm" target="_blank">联系我们</a> -  
<a href="http://www.jb51.net/sm.htm" target="_blank">免责声明</a> -  
<a href="http://www.jb51.net/sitemap.htm" target="_blank">网站地图</a> - 
<a href="tencent://message/?uin=461478385&Site=http://www.jb51.net" target="_blank">投诉建议</a> - 
<a href="http://www.jb51.net/up.htm" target="_blank">在线投稿</a>
</p>
<p>&copy;CopyRight 2006-2016 JB51.Net Inc All Rights Reserved. 脚本之家 版权所有</p>
</div>
</div><!--end footer-->
<link type="text/css" rel="stylesheet" href="/jslib/syntaxhighlighter/styles/shCore.css" />
<link type="text/css" rel="Stylesheet" href="/jslib/syntaxhighlighter/styles/shThemeDefault.css" />
<script type="text/javascript" src="/jslib/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="/jslib/syntaxhighlighter/scripts/shAutoloader.js"></script>
<script type="text/javascript"> 
if (top.location != self.location)top.location=self.location;
$('#content').find('img').each(function(){
        var img = this;
        if (img.width >= 650){
            img.style.width = "650px";
            img.style.height = "auto";
            //$(img).removeAttr('height');
            var aTag = document.createElement('a');
            aTag.href = img.src;
			aTag.target="_blank";
            $(aTag).addClass('bPic')
            .insertAfter(img).append(img)
          }
    });
 $(window).scroll(function()
    {	
    	//rFixedBox跟随滚动
    	var h = $(window).height();
        var top = $(window).scrollTop();
    	var rFixedBox = $('.rFixedBox').prev().offset();
        var fixedTop = rFixedBox.top;
		
        if(top>=fixedTop+344)
        {
			var h1 = parseInt($('#content').children('.main').height());
			if(parseInt(top) + 340 < h1){
				$('.rFixedBox').css({'position':'fixed','top': 0});
			}else{
				$('.rFixedBox').css({'position':'absolute','top': h1-510});
			}
        }
        else
        {
            $('.rFixedBox').css({'position':'static', 'top':0});   
        }	
       /* return true;*/
    });
SyntaxHighlighter.autoloader(
	'applescript			/jslib/syntaxhighlighter/scripts/shBrushAppleScript.js',
	'actionscript3 as3		/jslib/syntaxhighlighter/scripts/shBrushAS3.js',
	'bash shell				/jslib/syntaxhighlighter/scripts/shBrushBash.js',
	'coldfusion cf			/jslib/syntaxhighlighter/scripts/shBrushColdFusion.js',
	'cpp c					/jslib/syntaxhighlighter/scripts/shBrushCpp.js',
	'obj-c objc				/jslib/syntaxhighlighter/scripts/shBrushObjC.js',
	'c# c-sharp csharp		/jslib/syntaxhighlighter/scripts/shBrushCSharp.js',
	'css					/jslib/syntaxhighlighter/scripts/shBrushCss.js',
	'delphi pascal			/jslib/syntaxhighlighter/scripts/shBrushDelphi.js',
	'diff patch pas			/jslib/syntaxhighlighter/scripts/shBrushDiff.js',
	'erl erlang				/jslib/syntaxhighlighter/scripts/shBrushErlang.js',
	'groovy					/jslib/syntaxhighlighter/scripts/shBrushGroovy.js',
	'haxe hx				/jslib/syntaxhighlighter/scripts/shBrushHaxe.js',
	'java					/jslib/syntaxhighlighter/scripts/shBrushJava.js',
	'jfx javafx				/jslib/syntaxhighlighter/scripts/shBrushJavaFX.js',
	'js jscript javascript	/jslib/syntaxhighlighter/scripts/shBrushJScript.js',
	'perl pl				/jslib/syntaxhighlighter/scripts/shBrushPerl.js',
	'php					/jslib/syntaxhighlighter/scripts/shBrushPhp.js',
	'text plain				/jslib/syntaxhighlighter/scripts/shBrushPlain.js',
	'py python				/jslib/syntaxhighlighter/scripts/shBrushPython.js',
	'ruby rails ror rb		/jslib/syntaxhighlighter/scripts/shBrushRuby.js',
	'scala					/jslib/syntaxhighlighter/scripts/shBrushScala.js',
	'sql					/jslib/syntaxhighlighter/scripts/shBrushSql.js',
	'vb vbnet				/jslib/syntaxhighlighter/scripts/shBrushVb.js',
	'ps powershell			/jslib/syntaxhighlighter/scripts/shBrushPowerShell.js',
	'xml xhtml xslt html	/jslib/syntaxhighlighter/scripts/shBrushXml.js'
);
SyntaxHighlighter.all();
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script type="text/javascript" src='http://img.jb51.net/js/jbLoader.js'></script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<div id="tongji">
<script type="text/javascript" src="http://img.jb51.net/inc/tongji.js"></script>
<script>
(function(){
var appid = 'cyrHH3dwi',
conf = 'prod_1dc5dc80970106099d43fe242b7465fc';
var doc = document,
s = doc.createElement('script'),
h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
s.type = 'text/javascript';
s.charset = 'utf-8';
s.src =  'http://assets.changyan.sohu.com/upload/changyan.js?conf='+ conf +'&appid=' + appid;
h.insertBefore(s,h.firstChild);
window.SCS_NO_IFRAME = true;
})();
</script>
</div>
<script type="text/javascript" src="http://www.jb51.net/pl.asp?id=57678"></script>
<script type="text/javascript" charset="utf-8" src="http://changyan.itc.cn/js/??lib/jquery.js,changyan.labs.js?appid=cyrEjJlIw"></script>
</body>
</html>
<!-- published at 2016-6-17 1:26:05By dxycms qq:461478385  -->
